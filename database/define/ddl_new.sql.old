SET FOREIGN_KEY_CHECKS = 0;

drop table if exists `order`;
create table `order` (
  `id` int primary key auto_increment not null,
  `customer_id` int,
  `sender` varchar(256),
  `recipient` varchar(256),
  `type` varchar(64),
  `weight` decimal(10, 3) comment 'kilogram',
  `create_time` datetime,
  `timeliness` datetime,
  `fare` decimal(10, 2)
) engine = innodb character set = utf8mb4;

drop table if exists `hazardous_material`;
create table `hazardous_material`(
  `id` int primary key not null,
  `info` text,
  constraint `hazardous_material` foreign key (`id`) references `order`(`id`) on delete cascade on update cascade
) engine = innodb character set = utf8mb4;

drop table if exists `international_shipment`;
create table `international_shipment`(
  `id` int primary key not null,
  `stating` text,
  `value` decimal(10, 2),
  constraint `international_shipment` foreign key (`id`) references `order`(`id`) on delete cascade on update cascade
) engine = innodb character set = utf8mb4;

drop table if exists `warehouse`;
create table `warehouse`(
  `id` int primary key auto_increment not null,
  `name` varchar(64),
  `address` varchar(256),
  `longitude` decimal(10, 6),
  `latitude` decimal(10, 6),
  `volume` decimal(32, 3) comment 'cubemeter'
) engine = innodb character set = utf8mb4;

drop table if exists `transport_method`;
create table `transport_method`(
  `id` int primary key auto_increment not null,
  `name` varchar(64),
  `type` varchar(64)
) engine = innodb character set = utf8mb4;

drop table if exists `state`;
create table `state`(
  `id` int primary key auto_increment not null,
  `start_time` datetime not null
) engine = innodb character set = utf8mb4;

drop table if exists `store`;
create table `store`(
  `id` int primary key not null,
  `warehouse_id` int not null,
  constraint `store` foreign key (`id`) references `state`(`id`) on delete cascade on update cascade,
  constraint `warehouse` foreign key (`warehouse_id`) references `warehouse`(`id`) on delete restrict on update cascade
) engine = innodb character set = utf8mb4;

drop table if exists `transport`;
create table `transport`(
  `id` int primary key not null,
  `source` text,
  `destination` text,
  `method_id` int not null,
  constraint `transport` foreign key (`id`) references `state`(`id`) on delete cascade on update cascade,
  constraint `transport_method` foreign key (`method_id`) references `transport_method`(`id`) on delete restrict on update cascade
) engine = innodb character set = utf8mb4;

drop table if exists `customer`;
create table `customer`(
  `id` int primary key
)